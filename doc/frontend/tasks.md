# 实现计划：douyin-extra-frontend

## 概述
本计划基于已确认的需求与设计文档，将 Vue3 前端管理界面拆解为可执行的工程任务，覆盖项目结构、数据模型、基础设施、业务组件、轮询机制与测试交付。

## 任务
- [x] 1. 设置项目结构与依赖
  - [x] 1.1 初始化 Vite + Vue3 + TypeScript 工程目录结构
  - [x] 1.2 集成 Vue Router 与 Pinia 并建立基础入口
  - [x] 1.3 引入 Axios 与环境变量配置（baseURL）
  - [x] 1.4 建立基础样式与布局基线
  _需求：1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

- [x] 2. 定义数据模型与枚举
  - [x] 2.1 定义 RecordingResponse、RecordingStatus、ErrorResponse 类型
  - [x] 2.2 定义状态枚举与状态映射（颜色、标签）
  - [x] 2.3 定义进度结构与格式化辅助函数
  _需求：2.1, 3.1, 6.1, 6.6_

- [x] 3. 搭建基础设施层
  - [x] 3.1 封装 Axios 客户端与统一错误归一化
  - [x] 3.2 设计轮询控制器（列表轮询 + 单任务轮询）
  - [x] 3.3 实现状态映射与通用展示组件
  _需求：2.1, 2.4, 6.1, 6.6_

- [x] 4. 实现核心服务层
  - [x] 4.1 实现 API 服务：start/stop/status/list/config/health
  - [x] 4.2 实现 Pinia Store：列表、详情、状态缓存、加载态
  - [x] 4.3 实现轮询触发与停止策略
  _需求：1.1, 2.1, 2.3, 3.1, 4.1, 5.1, 7.1_

- [x] 5. 实现业务逻辑与页面组件
  - [x] 5.1 录制任务总览页：创建、列表与刷新
  - [x] 5.2 任务卡片组件：状态、进度与停止入口
  - [x] 5.3 任务详情弹窗/侧栏：任务信息与进度展示
  - [x] 5.4 Cookie 配置面板：更新入口与安全提示
  - [ ] 5.5 健康检查面板
  _需求：1.1, 3.1, 4.1, 5.1, 6.1, 7.1_

- [x] 6. 编写属性测试
  - **属性1: 任务创建一致性**
  - **验证需求：1.1, 1.2**
  - [x] 6.1 编写创建成功后列表出现任务的属性测试
  - **属性2: 列表与状态轮询准确性**
  - **验证需求：2.1, 2.2, 2.3, 2.4**
  - [x] 6.2 编写轮询频率与终态停止的属性测试
  - **属性3: 任务详情完整性**
  - **验证需求：3.1, 3.2, 3.3**
  - [x] 6.3 编写详情展示字段完整性的属性测试
  - **属性4: 停止操作安全性**
  - **验证需求：4.1, 4.2, 4.3**
  - [x] 6.4 编写停止操作可用性与反馈的属性测试
  - **属性5: Cookie 更新可靠性**
  - **验证需求：5.1, 5.2, 5.3**
  - [x] 6.5 编写 Cookie 更新成功与提示的属性测试
  - **属性6: 状态映射一致性**
  - **验证需求：6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7**
  - [x] 6.6 编写状态颜色与错误提示一致性的属性测试
  - **属性7: 健康检查可用性**
  - **验证需求：7.1**
  - [ ] 6.7 编写健康检查展示的属性测试
  _需求：1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

- [x] 7. 错误处理与提示
  - [x] 7.1 实现 ErrorResponse.message 优先展示
  - [x] 7.2 针对 400/429/503 提供明确提示
  - [x] 7.3 轮询失败保留上次有效数据
  _需求：2.4, 6.6, 6.7_

- [x] 8. API 接口层与契约
  - [x] 8.1 定义请求与响应 DTO 与映射逻辑
  - [x] 8.2 统一处理接口状态码并映射为前端错误
  - [x] 8.3 处理 baseURL 与跨域策略说明
  _需求：1.1, 4.1, 5.1, 6.6_

- [x] 9. 输入校验与交互限制
  - [x] 9.1 抖音号必填校验与提交禁用
  - [x] 9.2 Cookie 输入敏感提示与脱敏展示
  - [x] 9.3 不可停止状态禁用按钮
  _需求：1.1, 4.3, 5.3_

- [x] 10. 日志与监控预留
  - [x] 10.1 关键请求失败日志记录
  - [x] 10.2 预留错误上报接口位置
  _需求：6.6, 6.7_

- [x] 11. 集成与端到端测试
  - [x] 11.1 录制任务创建到详情打开流程测试
  - [x] 11.2 停止任务与状态更新流程测试
  - [x] 11.3 Cookie 更新成功流程测试
  - [ ] 11.4 健康检查展示流程测试
  _需求：1.1, 3.1, 4.1, 5.1, 7.1_

- [x] 12. 最终检查点
  - [x] 12.1 关键功能与测试用例执行通过
  - [x] 12.2 需求追溯与文档一致性复核
  _需求：1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1_

## 注意事项
- 标记为（可选）的任务可后续再做
- 任务末尾需求引用用于可追溯性审计
- 检查点任务用于增量验证关键路径
- 属性测试侧重约束与一致性，单元/集成测试侧重功能与流程
